2025-12-18 15:37:00 - [INFO] - 🚀 日志系统初始化完成。日志文件路径: /root/KGPRAG/logs/kgs/build_kg_20251218_153700.log
2025-12-18 15:37:00 - [INFO] - ======================================================================
2025-12-18 15:37:00 - [INFO] - 🚀 HotpotQA 全量建图工具 (对标 KG2RAG)
2025-12-18 15:37:00 - [INFO] - ======================================================================
2025-12-18 15:37:00 - [INFO] - 📂 输入文件: data/hotpot_dev_distractor_v1.json
2025-12-18 15:37:00 - [INFO] - 📂 持久化目录: data/hotpotqa
2025-12-18 15:37:00 - [INFO] - ⚙️  使用 LLM 摘要: False
2025-12-18 15:37:00 - [INFO] - ⏩ 断点续传: True
2025-12-18 15:37:00 - [INFO] - ======================================================================
2025-12-18 15:37:00 - [INFO] - 
📄 加载数据集...
2025-12-18 15:37:01 - [INFO] - ✅ 加载 7405 个 QA 样本
2025-12-18 15:37:01 - [INFO] - 
📑 提取唯一文档...
2025-12-18 15:37:01 - [INFO] - ✅ 提取 66581 个唯一文档
2025-12-18 15:37:01 - [INFO] -    (原始 74050 个文档，去重率: 10.1%)
2025-12-18 15:37:01 - [INFO] - 💾 保存样本-文档映射: data/hotpotqa/sample_doc_mapping.json
2025-12-18 15:37:01 - [INFO] - 💾 保存标题-文档ID映射: data/hotpotqa/title_to_doc_id.json
2025-12-18 15:37:01 - [INFO] - 
🔧 初始化模块...
2025-12-18 15:37:19 - [INFO] - ✅ 模块初始化完成
2025-12-18 15:37:19 - [INFO] - 
🔍 检查已存在文档...
2025-12-18 15:37:19 - [INFO] - ✅ 发现 0 个已存在 Chunk
2025-12-18 15:37:19 - [INFO] - 
🚀 开始构建全量图谱...
2025-12-18 15:37:19 - [INFO] -    共 66581 个文档
2025-12-18 15:37:19 - [INFO] -   📝 Step 1/5: 预处理 66581 个文档
2025-12-18 15:37:19 - [INFO] -   🔢 Step 2/5: 批量 Embedding...
2025-12-18 15:48:54 - [INFO] -   🏷️ Step 3/5: 批量实体抽取...
2025-12-18 15:59:02 - [INFO] -   🔗 Step 4/5: 批量关系抽取...
2025-12-18 15:59:02 - [INFO] -      REBEL 处理 66550/66581 个文档 (早退优化)
2025-12-18 18:31:17 - [INFO] -   📦 Step 5/5: 组装图谱结构...
2025-12-18 18:31:19 - [INFO] -   🌳 构建摘要树...
2025-12-18 18:31:42 - [INFO] -   💾 写入向量库: 133162 个文档
2025-12-18 18:57:36 - [INFO] -   🔗 计算语义边...
2025-12-18 19:01:42 - [INFO] -   💾 写入 Neo4j: 66581 chunks, 66581 summaries, 98073 edges
2025-12-18 20:15:52 - [INFO] -   📊 统计: 835673 实体, 160521 关系
2025-12-18 20:15:55 - [INFO] - ✅ 图谱构建完成，耗时: 16715.3s
2025-12-18 20:15:55 - [INFO] - 💾 保存文档缓存: data/hotpotqa/doc_cache.json
2025-12-18 20:15:55 - [INFO] - 
======================================================================
2025-12-18 20:15:55 - [INFO] - ✅ 全量建图完成!
2025-12-18 20:15:55 - [INFO] - 📊 统计:
2025-12-18 20:15:55 - [INFO] -    - QA 样本数: 7405
2025-12-18 20:15:55 - [INFO] -    - 唯一文档数: 66581
2025-12-18 20:15:55 - [INFO] -    - 文档缓存大小: 66581
2025-12-18 20:15:55 - [INFO] -    - 构建耗时: 16715.3s
2025-12-18 20:15:55 - [INFO] -    - 平均每文档: 0.251s
2025-12-18 20:15:55 - [INFO] - 📂 持久化目录: /root/KGPRAG/data/hotpotqa
2025-12-18 20:15:55 - [INFO] - 
📝 下一步:
2025-12-18 20:15:55 - [INFO] -    运行评测: python evaluate.py
2025-12-18 20:15:55 - [INFO] - ======================================================================
